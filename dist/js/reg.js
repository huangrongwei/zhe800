"use strict";$(function(){function s(s,o){$(s).attr("value","").css("border","1px solid blue"),$(s).parent().find("p").css("color","#999").text(""+o)}var r=!1;$("#user").focusin(function(){s(this,"请填写注册账号")}).focusout(function(){var s=$.trim($("#user").val()),o=$(this);s?match.name(s)?$.ajax({type:"POST",url:"../api/query.php",async:!0,data:{username:s,method:"reg"},success:function(s){console.log(s),"1"==s?$(o).css("border","1px solid #ea9292").next().css("color","red").text("用户名已存在"):($(o).css("border","1px solid #999").next().css("color","green").text("√"),r=!0)}}):$(this).css("border","1px solid #ea9292").next().css("color","red").text("用户名格式错误(首字母开头6-20)"):$(this).attr("value","用户名").css("border","1px solid #ea9292").next().css("color","red").text("用户名不能为空")});var c=!1;$("#psw").focusin(function(){s(this,"6-24位字母,数字")}).focusout(function(){var s=$.trim($("#psw").val());s?s.length<6?$(this).css("border","1px solid #ea9292").next().css("color","red").text("密码过短,最短支持6个字符"):match.psweasy(s)?($(this).css("border","1px solid #999").next().css("color","green").text("√"),c=!0):$(this).css("border","1px solid #ea9292").next().css("color","red").text("密码应为数字和字母组合"):$(this).css("border","1px solid #ea9292").next().css("color","red").text("请输入密码")});var n=!1;$("#apsw").focusin(function(){s(this,"请再次输入您的密码")}).focusout(function(){var s=$.trim($(this).val()),o=$.trim($("#psw").val());s?match.pwwagain(s,o)?($(this).css("border","1px solid #999").next().css("color","green").text("√"),n=!0):$(this).css("border","1px solid #ea9292").next().css("color","red").text("两次密码输入不一致"):$(this).css("border","1px solid #ea9292").next().css("color","red").text("确认密码不能为空")});var i=!1;$("#autocode").focusin(function(){s(this,"验证码")}).focusout(function(){if($.trim($(this).val())){var s=$.trim($("#autocode").val()),o=$("#cap").text();s?match.pwwagain(s,o)?(i=!0,$(this).css("border","1px solid #999").parent().find("p").css("color","green").text("√")):$(this).css("border","1px solid #ea9292").parent().find("p").css("color","red").text("验证码错误"):$(this).css("border","1px solid red").parent().find("p").css("color","red").text("请输入验证码")}else $(this).css("border","1px solid #ea9292").parent().find("p").css("color","red").text("请输入验证码")}),$("#cap").text(getCode(4)).css({background:randomColor(16),color:randomColor(16)}),$("#cap").click(function(){$("#cap").text(getCode(4)).css({background:randomColor(16),color:randomColor(16)})});var t=0,a=!1;$("#chunk").mousedown(function(s){t=s.pageX-$(this).position().left,$(document).mousemove(function(s){var o=s.pageX-t;o<0&&(o=0),o>=$("#box").outerWidth()-$("#chunk").outerWidth()&&(o=$("#box").outerWidth()-$("#chunk").outerWidth()),$("#chunk").css("left",o+"px"),$("#color").css("width",o+"px")}),$(document).mouseup(function(s){var o=s.pageX-t;0<o&&o<$("#box").outerWidth()-$("#chunk").outerWidth()&&$("#chunk").css("left",0),o>=$("#box").outerWidth()-$("#chunk").outerWidth()&&($("#chunk").css("display","none"),$("#chunk2").css("display","block"),a=!0,$(".msg").text(""),$("#color").html("验证通过")),$(document).unbind("mousemove"),$(document).unbind("mousedown"),$(document).unbind("mouseup")})}),$("#btn").click(function(){var s=$.trim($("#user").val()),o=$.trim($("#psw").val()),t=$.trim($("#apsw").val()),e=$.trim($("#autocode").val());"用户名"==s&&$("#user").css("border","1px solid #ea9292").next().css("color","red").text("用户格式错误"),o||$("#psw").css("border","1px solid #ea9292").next().css("color","red").text("请输入密码"),t||$("#apsw").css("border","1px solid #ea9292").next().css("color","red").text("确认密码不能为空"),e||$("#autocode").css("border","1px solid #ea9292").parent().find("p").css("color","red").text("请输入验证码"),r&&c&&n&&i&&a&&$.ajax({type:"POST",url:"../api/add.php",async:!0,data:{method:"insert",username:s,password:o},success:function(s){"1"==s&&(alert("注册成功"),location.href="../html/login.html?")}})});var o=!0;$(".link span").click(function(){o?($(".more").css("display","block"),$(".link span i").css("background","url(../img/shangarr.png) no-repeat")):($(".more").css("display","none"),$(".link span i").css("background","url(../img/xiaarr.png) no-repeat")),o=!o})});